<%- include('partials/header') %>

<section class="container mx-auto py-12">
    <h2 class="text-4xl font-bold text-center mb-12">Shop Shoes</h2>


<!-- Filter Buttons -->
<div class="flex justify-center mb-8 space-x-4">
    <a href="/shop" class="px-4 py-2 bg-lion-gold text-lion-black rounded-lg font-semibold hover:bg-yellow-500">All</a>
    <a href="/shop/men" class="px-4 py-2 bg-lion-gold text-lion-black rounded-lg font-semibold hover:bg-yellow-500">Men</a>
    <a href="/shop/women" class="px-4 py-2 bg-lion-gold text-lion-black rounded-lg font-semibold hover:bg-yellow-500">Women</a>
    <a href="/shop/kids" class="px-4 py-2 bg-lion-gold text-lion-black rounded-lg font-semibold hover:bg-yellow-500">Kids</a>
</div>

<!-- Shoes Grid -->
<div class="grid grid-cols-1 md:grid-cols-4 gap-8">
    <% shoes.forEach(shoe => { %>
        <div class="bg-white rounded-lg shadow-lg overflow-hidden hover:shadow-xl transition">
            <img src="<%= shoe.image %>" alt="<%= shoe.name %>" class="w-full h-48 object-cover">
            <div class="p-4">
                <h3 class="text-lg font-semibold mb-2"><%= shoe.name %></h3>
                <p class="text-gray-600 mb-2"><%= shoe.category %></p>
                <p class="font-bold mb-4">
                    $<%= shoe.priceUSD %> / FRW <%= shoe.priceFRW.toLocaleString() %>
                </p>
                <button onclick="openModal('<%= shoe.id %>')" 
                    class="w-full bg-lion-gold text-lion-black text-center py-2 rounded-lg font-semibold hover:bg-yellow-500">
                    View Details
                </button>
            </div>
        </div>

        <!-- Modal -->
        <div id="modal-<%= shoe.id %>" class="fixed inset-0 bg-black bg-opacity-50 hidden justify-center items-center z-50">
            <div class="bg-white rounded-lg shadow-lg w-11/12 md:w-2/3 lg:w-1/2 p-6 relative">
                <button onclick="closeModal('<%= shoe.id %>')" class="absolute top-2 right-2 text-xl font-bold">&times;</button>
                <div class="flex flex-col md:flex-row gap-6">
                    <img src="<%= shoe.image %>" alt="<%= shoe.name %>" class="w-full md:w-1/2 h-64 object-cover rounded-lg">
                    <div class="flex-1">
                        <h3 class="text-2xl font-bold mb-4"><%= shoe.name %></h3>
                        <p class="text-gray-700 mb-2"><strong>Category:</strong> <%= shoe.category %></p>
                        <p class="text-gray-700 mb-2"><strong>Price:</strong> $<%= shoe.priceUSD %> / FRW <%= shoe.priceFRW.toLocaleString() %></p>
                        <p class="text-gray-700 mb-2"><strong>Sizes Available:</strong> <%= shoe.sizes %></p>
                        <% if (shoe.material) { %>
                            <p class="text-gray-700 mb-2"><strong>Material:</strong> <%= shoe.material %></p>
                        <% } %>
                        <p class="text-gray-700 mb-4">
                            <strong>Stock Status:</strong> 
                            <%= shoe.quantity > 0 ? 'In Stock (' + shoe.quantity + ')' : 'Out of Stock' %>
                        </p>
                        <button class="w-full bg-lion-gold text-lion-black py-2 rounded-lg font-semibold hover:bg-yellow-500"
                                <%= shoe.quantity === 0 ? 'disabled class="bg-gray-400 cursor-not-allowed"' : '' %>>
                            Add to Cart
                        </button>
                    </div>
                </div>
            </div>
        </div>
    <% }) %>
</div>


</section>

<%- include('partials/footer') %>

<script>
function openModal(id) {
    const modal = document.getElementById('modal-' + id);
    modal.classList.remove('hidden');
    modal.classList.add('flex');
}

function closeModal(id) {
    const modal = document.getElementById('modal-' + id);
    modal.classList.remove('flex');
    modal.classList.add('hidden');
}
</script>
